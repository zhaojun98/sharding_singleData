## ShardingJDBC实现分库分表

### 一、技术架构:

### `Springboot2.7+swagger3.0+shardingJDBC`

### 二、ShardingJDBC介绍:

ShardingJDBC是一个成熟的Java分库分表客户端组件，它提供了多种实用的功能来简化分布式数据库的操作和管理。以下是ShardingJDBC的一些核心功能和优势：

**1.分库分表支持**：ShardingJDBC能够支持复杂的分库分表策略，包括基于表达式、时间、枚举、哈希、范围等多种分片策略。

**2.无需额外部署**：作为一个开源的分布式数据库中间件，ShardingJDBC无需额外的部署和依赖，这意味着旧代码迁移到ShardingJDBC的成本几乎为零。

**3.云原生基础类库**：ShardingJDBC被设计为面向开发人员的微服务云原生基础类库，它不仅完整实现了分库分表的功能，还提供了与微服务架构兼容的特性。

**4.成熟度高应用广**：ShardingJDBC是目前成熟度最高并且应用最广的Java分库分表客户端组件之一。

**5.Apache ShardingSphere项目**：ShardingJDBC是Apache ShardingSphere项目的一部分，该项目还包括ShardingSphere-Proxy，它们共同提供了数据库分库分表的解决方案。



### 三、ShardingJDBC实现分表方式

**1.水平分片:**

按照业务拆分的方式称为垂直分片,又称为纵向拆分.它的核心理念是专库专用.在拆分前,一个数据库由多个数据表构成,每个表对应着不同的业务.而拆分之后,则是按照业务将表进行归纳,分布到不同的数据库中,从而将压力分散至不同的数据库.

- **逻辑表:**对于水平拆分的数据库(表)的同一类表的总称.
- **真实表:**在分片的数据库中真实存在的物理表.

例:订单数据根据住建尾数拆分为10张表,分别是t_order_0到t_order_9,他们的逻辑表是t_order, 真实表是t_order_0至t_order_9

- **绑定表:**指分片规则一致的主表和子表.

例:t_order表与t_order_time表,均按照订单ID分片,则此两张表互为绑定表关系,绑定表之间的多表关联查询不回出现笛卡尔积关联,关联查询效率将大大提升.

- **数据节点**：数据分片的最小单元,由数据源名称和数据表组成.

- **广播表**:也叫公共表，指素有的分片数据源中都存在的表，表结构和表中的数据在每个数据库中都完全一致。例如字典表。

- **分片键**:用于分片的数据库字段，是将数据库(表)进行水平拆分的关键字段。.SQL中若没有分片字段，将会执行全路由，性能会很差。

- **分片算法**:通过分片算法将数据进行分片，支持通过=、BETWEEN和IN分片。.分片算法需要由应用开发者自行实现，可实现的灵活度非常高。

- **分片策略**:真正用于进行分片操作的是分片键+分片算法，也就是分片策略。在·ShardingJDBC中一般采用基于Groovy表达式的inline分片策略，通过一个包含分片键的算法表达式来制定分片策略，如t_user_S->(u_id%8}标识根据u_id模8,分成8张表，表名称为t_user_0到t_user_7。

**2.垂直分片:**





### 四、项目结构:



#### 1.sharding-read-write项目介绍

**注意事项:**

<img src="https://gitee.com/lylen/typora_img/raw/master/img/202403231140940.png" alt="image-20240323113948573" style="zoom:33%;" />